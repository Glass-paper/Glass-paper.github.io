<!DOCTYPE html>
<html>
<head>
	
	<metahttp-equiv='X-UA-Compatible'content='IE=edge'>
	<title>my webpage</title>
	<metaname='viewport'content='width=device-width,initial-scale=1'>
	<link rel="stylesheet" type="text/css" href="style1.css">
	<script src="./node_modules/web3/dist/web3.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"
  type="application/javascript"></script>



</head>


<body>


	<div class="login-box">
		<h2>CREATE PROCESS</h2>
		<form>
		  <div class="user-box">
			<input type="text" id="originFisherName" name="" required="">
			<label>Address</label>
		  </div>
		  <div class="user-box">
			<input type="text" id="originFisherName1" name="" required="">
			<label>Manufacturer Name</label>
		  </div>
		  <div class="user-box">
			<input type="text" id="originFisherName2" name="" required="">
			<label>Manufacturer Long/Lat</label>
		  </div>
		  <div class="user-box">
			<input type="text" id="originFisherInformation" name="" required="">
			<label>Process Serial No</label>
		  </div>
		  <div class="user-box">
			<input type="text" id="originFisherLatitude" name="" required="">
			<label>Process Type</label>
		  </div>
		  <div class="user-box">
			<input type="text" id="originFisherLongitude" name="" required="">
			<label>Creation Date</label>
		  </div>
		  <div class="user-box">
			<input type="text" id="originFisherCert" name="" required="">
			<label>Certification Hash</label>
		  </div>

      <p>Process Hash</p>
		  <div class="user-box">
			<output type="text" id="instructor" name="" required="">
			
		  </div>

      <br><br>

      <div>
		  <a href="#">
        
			<span></span>
			<span></span>
			<span></span>
			<span></span>
          <button class="btn-harvest" id="button"  >SUMBIT</button>

		  </a>
      </div>
		

<script>

window.ethereum.enable();

	const provider = new ethers.providers.Web3Provider(window.ethereum)
	
	// The Metamask plugin also allows signing transactions to
	// send ether and pay to change state within the blockchain.
	// For this, you need the account signer...
	const signer = provider.getSigner(0);
	
	let contAdd= "0x0061B7Bd6820802CFFc6770e86976BC5F71EE2c1";
	let contABI= [
		{
		  "inputs": [],
		  "payable": false,
		  "stateMutability": "nonpayable",
		  "type": "constructor"
		},
		{
		  "anonymous": false,
		  "inputs": [
			{
			  "indexed": false,
			  "internalType": "string",
			  "name": "",
			  "type": "string"
			},
			{
			  "indexed": false,
			  "internalType": "string",
			  "name": "",
			  "type": "string"
			},
			{
			  "indexed": false,
			  "internalType": "string",
			  "name": "",
			  "type": "string"
			}
		  ],
		  "name": "Processhmade",
		  "type": "event"
		},
		{
		  "anonymous": false,
		  "inputs": [
			{
			  "indexed": false,
			  "internalType": "bytes32",
			  "name": "",
			  "type": "bytes32"
			}
		  ],
		  "name": "processhash",
		  "type": "event"
		},
		{
		  "constant": true,
		  "inputs": [
			{
			  "internalType": "bytes32",
			  "name": "",
			  "type": "bytes32"
			}
		  ],
		  "name": "processes",
		  "outputs": [
			{
			  "internalType": "address",
			  "name": "manufacturer",
			  "type": "address"
			},
			{
			  "internalType": "string",
			  "name": "manufacturerName",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "serial_number",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "process_type",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "creation_date",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "longLat",
			  "type": "string"
			}
		  ],
		  "payable": false,
		  "stateMutability": "view",
		  "type": "function"
		},
		{
		  "constant": true,
		  "inputs": [
			{
			  "internalType": "bytes32",
			  "name": "",
			  "type": "bytes32"
			}
		  ],
		  "name": "products",
		  "outputs": [
			{
			  "internalType": "address",
			  "name": "manufacturer",
			  "type": "address"
			},
			{
			  "internalType": "string",
			  "name": "manufacturerName",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "longLat",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "serial_number",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "product_type",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "creation_date",
			  "type": "string"
			}
		  ],
		  "payable": false,
		  "stateMutability": "view",
		  "type": "function"
		},
		{
		  "constant": true,
		  "inputs": [
			{
			  "internalType": "address",
			  "name": "a1",
			  "type": "address"
			},
			{
			  "internalType": "string",
			  "name": "s1",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "s2",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "s3",
			  "type": "string"
			}
		  ],
		  "name": "concatenateInfoAndHash",
		  "outputs": [
			{
			  "internalType": "bytes32",
			  "name": "",
			  "type": "bytes32"
			}
		  ],
		  "payable": false,
		  "stateMutability": "pure",
		  "type": "function"
		},
		{
		  "constant": false,
		  "inputs": [
			{
			  "internalType": "address",
			  "name": "manuf",
			  "type": "address"
			},
			{
			  "internalType": "string",
			  "name": "serial_number",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "manufacturerName",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "longLat",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "process_type",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "creation_date",
			  "type": "string"
			}
		  ],
		  "name": "buildProcess",
		  "outputs": [
			{
			  "internalType": "bytes32",
			  "name": "",
			  "type": "bytes32"
			}
		  ],
		  "payable": false,
		  "stateMutability": "nonpayable",
		  "type": "function"
		},
		{
		  "constant": false,
		  "inputs": [
			{
			  "internalType": "string",
			  "name": "serial_number",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "manufacturerName",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "longLat",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "product_type",
			  "type": "string"
			},
			{
			  "internalType": "string",
			  "name": "creation_date",
			  "type": "string"
			},
			{
			  "internalType": "bytes32[]",
			  "name": "process_array",
			  "type": "bytes32[]"
			}
		  ],
		  "name": "buildProduct",
		  "outputs": [
			{
			  "internalType": "bytes32",
			  "name": "",
			  "type": "bytes32"
			}
		  ],
		  "payable": false,
		  "stateMutability": "nonpayable",
		  "type": "function"
		},
		{
		  "constant": true,
		  "inputs": [
			{
			  "internalType": "bytes32",
			  "name": "product_hash",
			  "type": "bytes32"
			}
		  ],
		  "name": "getProcess",
		  "outputs": [
			{
			  "internalType": "bytes32[]",
			  "name": "",
			  "type": "bytes32[]"
			}
		  ],
		  "payable": false,
		  "stateMutability": "view",
		  "type": "function"
		}
	  ];
	  const contract = new ethers.Contract(contAdd,contABI, signer);
	const WithSigner =contract.connect(signer);
					//console.log(Contract1);
					var res;
				
				
				
		   
		  
			
				  $("#button").click( async function() {
				var a1 =await $("#originFisherName").val();
				var a11 =await $("#originFisherName1").val();
				var a12 =await $("#originFisherName2").val();
			  var a2 = await $("#originFisherInformation").val();
			  var a3 = await $("#originFisherLatitude").val();
			  var a4 = await $("#originFisherLongitude").val();
		  
			  console.log(a1);
			  console.log(a11);
			  console.log(a12);
			  console.log(a2);
			  console.log(a3);
			  console.log(a4);
		  
					  let p=await contract.buildProcess(a1,a2,a11,a12,a3,a4).then(console.log("done"))
					  console.log(p);
		  
		  
							 
		  console.log(provider[0]);
					let result=await contract.concatenateInfoAndHash(a1,a2,a3,a4);
					console.log(result);
				  //{
					 
							 $("#instructor").html(result);
							  //console.log(result);
							  //document.getElementById("distributorID").innerHTML = result;
		  
						  
					 
				 });
	
		  
			  
				  
			  </script>
		  
		  </body>
		  </html>
		  
	  </body>
	</html>
